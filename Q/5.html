<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>[编程题]重建二叉树</title>
    <link rel="stylesheet" href="https://kscript.github.io/exam/css/meditor.css">
    <base href="https://www.nowcoder.com/questionTerminal/">
    <base href="https://static.nowcoder.com/">
</head>
<body>
<div class="page">
<div class="question">

<div class="nk-content">
<div class="subject-box">
<div class="subject-title">
[编程题]重建二叉树
</div>
<div class="subject-main">
<div class="subject-des">
输入某二叉树的前序遍历和中序遍历的结果，请重建出该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。例如输入前序遍历序列{1,2,4,7,3,5,6,8}和中序遍历序列{4,7,2,1,5,3,8,6}，则重建二叉树并返回。
<script type="text/javascript">
(function(){var i,l,w=window.String,s="33,102,117,110,99,116,105,111,110,40,41,123,118,97,114,32,97,61,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,104,111,115,116,59,97,38,38,97,46,105,110,100,101,120,79,102,40,34,110,111,119,99,111,100,101,114,46,99,111,109,34,41,60,48,38,38,119,105,110,100,111,119,46,115,101,116,84,105,109,101,111,117,116,40,102,117,110,99,116,105,111,110,40,41,123,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,104,114,101,102,61,34,104,116,116,112,58,47,47,119,119,119,46,110,111,119,99,111,100,101,114,46,99,111,109,34,125,44,49,53,48,48,48,41,125,40,41,59",a=s.split(",");for(s="",i=0,l=a.length;l>i;i++)s+=w.fromCharCode(a[i]);eval(s);})();
</script>
</div>
<div class="subject-action clearfix">
<button id="beginChallenge" class="btn btn-run nc-req-auth">马上挑战
</button>
<a href="/courses/1" target="_blank" class="link-green video-explain">
<i class="fui-video"></i>
算法知识视频讲解
</a>
</div>
<div id="codeEditor" style="display:none">
<div id="subjectMain"></div>
<div class="subject-info" style="display:none">
<div class="alert alert-danger" id="subjectInfo"></div>
</div>
<br/>
<div class="subject-action clearfix">
<button class="btn btn-run run-code">提交运行</button>
<a href="/courses/1" target="_blank" class="link-green video-explain">
<i class="fui-video"></i>
算法知识视频讲解
</a>
</div>
</div>
<div class="subject-action clearfix">
<ul class="oprt-tool clearfix">
<li>
<a href="javascript:void(0);" class="js-click-note oprt-item icon-notes nc-req-auth">
添加笔记
</a>
</li>
<li>
<a data-type="asking" data-count="298"
class="js-click-ask oprt-item oprt-ask nc-req-auth"
href="javascript:void(0);">求解答(298)</a>
</li>
<li>
<a class="click-invite oprt-item oprt-invite nc-req-auth nc-req-active" click-invite
href="javascript:void(0);">邀请回答</a></li>
<li>
<a class="oprt-item oprt-collect click-follow nc-req-auth"
href="javascript:void(0);">收藏</a>
</li>
<li class="oprt-item-share">
<a class="oprt-item oprt-share" href="javascript:void(0);">分享</a>
<div class="tooltip top">
<div class="tooltip-arrow"></div>
<div class="tooltip-inner">
<span class="q-share-to">
<a target="_blank"
href="/share?from=question&to=weibo&id=8a19cbe657394eeaac2f6ea9b0f6fcf6"
class="share-wb"></a>
<a target="_blank"
href="/share?from=question&to=qq&id=8a19cbe657394eeaac2f6ea9b0f6fcf6"
class="share-tx"></a>
<a target="_blank" style="display:inline-block; margin-right: 10px; width:26px;height:23px; background: url(//static.nowcoder.com//images/img/icon-wx.png) 0 0 no-repeat;"
href="javascript:void(0)"
class="share-wx"></a>
</span>
</div>
</div>
</li>
<li><a href="javascript:void(0);"
class="oprt-item oprt-error click-correction"
href="javascript:void(0);">纠错</a></li>
<li><a class="oprt-item oprt-help" href="javascript:void(0);">提交结果有问题?</a></li>
</ul>
</div>
<div class="subject-menu">
</div>
</div>
<div class="decorate-foot"></div>
</div>
<div class="module-box" id="firstCommentModule" style="display:none;"></div>
<div class="module-box js-discussion">
<div class="module-head clearfix">
<h1>3个回答</h1>
<a class="btn btn-primary float-right nc-req-auth"
href="/questionTerminal/8a19cbe657394eeaac2f6ea9b0f6fcf6?toCommentId=443906">
<i class="ico-submit"></i>
修改回答
</a>
</div>
<div class="module-body answer-mod" id="jsComment">
<ul class="answer-list" id="jsCommentList">
<li class="answer-list-item clearfix">
<div class="votebar">
<button class="js-click-like up" aria-pressed="false"
title="赞同"><i class="vote-arrow"></i><span
class="count">0</span></button>
<button class="js-click-dislike down" aria-pressed="true"
title="反对"><i class="vote-arrow"></i>
</button>
</div>
<div class="answer-content clearfix" data-cmt-id="443906"
data-dislikecnt="0"
data-isdisliked="$dislikeName" data-recommend="0">
<div class="answer-info">
<div class="tags-box">
<a href="/questionTerminal/8a19cbe657394eeaac2f6ea9b0f6fcf6?orderByHotValue=0&commentTags=JavaScript" class="tag-label">JavaScript</a>
</div>
<a href="/profile/9121687" class="answer-head"><img
src="https://images.nowcoder.com/images/20170220/9121687_1487584283190_7C2C60506876716CCF0E706DB13D4511@0e_100w_100h_0c_1i_1o_90Q_1x" alt="路人1头像"></a>
<a class="answer-name level-color-7" href="/profile/9121687" title="">路人1</a>
</div>
<div class="answer-brief">
<pre class="prettyprint lang-js">function reConstructBinaryTree(pre, vin)
{
        if(pre.length==0||vin.length==0){
                return null;
        };
        //前序第一个为根节点 也是中序左右子树的分割点
        var index=vin.indexOf(pre[0]);
        var left=vin.slice(0,index);//中序左子树
        var right=vin.slice(index+1);//中序右子树
        return {
            val:pre[0],
            //递归左右子树的前序，中序 
            left:reConstructBinaryTree(pre.slice(1,left.length+1),left),
            right:reConstructBinaryTree(pre.slice(left.length+1),right)
        };
}</pre>
<br>
</div>
<div class="answer-legend">
<span class="answer-time">
编辑于  今天 15:47:40
</span>
<a class="click-reply"
href="javascript:void(0);">
回复(0)
</a>
<a class="click-edit"
href="javascript:void(0);">修改</a>
<a class="click-del"
href="javascript:void(0);">删除</a>
</div>
</div>
</li>
<li class="answer-list-item clearfix">
<div class="votebar">
<button class="js-click-like up" aria-pressed="false"
title="赞同"><i class="vote-arrow"></i><span
class="count">1</span></button>
<button class="js-click-dislike down" aria-pressed="true"
title="反对"><i class="vote-arrow"></i>
</button>
</div>
<div class="answer-content clearfix" data-cmt-id="427338"
data-dislikecnt="0"
data-isdisliked="$dislikeName" data-recommend="0">
<div class="answer-info">
<div class="tags-box">
<a href="/questionTerminal/8a19cbe657394eeaac2f6ea9b0f6fcf6?orderByHotValue=0&commentTags=JavaScript" class="tag-label">JavaScript</a>
</div>
<a href="/profile/3527196" class="answer-head"><img
src="https://images.nowcoder.com/images/20170309/3527196_1489061450965_7C2C60506876716CCF0E706DB13D4511@0e_100w_100h_0c_1i_1o_90Q_1x" alt="程震宇头像"></a>
<a class="answer-name level-color-7" href="/profile/3527196" title="">程震宇</a>
</div>
<div class="answer-brief">
<pre class="prettyprint lang-js">function TreeNode(x) {
    this.val = x;
    this.left = null;
    this.right = null;
}
function reConstructBinaryTree(pre, vin)
{
    // write code here
    var root=new TreeNode();
        root.val=pre[0];
	getBinaryTree(pre,vin,root);
    return root;
    
}

function getBinaryTree(pre,vin,root){
    var rightVin=[];
    var leftVin=[];
    var rootIndex=vin.indexOf(root.val);
    rightVin=vin.slice(rootIndex+1);
    leftVin=vin.slice(0,rootIndex);
    var rightPre=getPre(pre,rightVin);
    var leftPre=getPre(pre,leftVin);
    if(rightPre.length!=0){
        root.right=new TreeNode(rightPre[0]);
        getBinaryTree(rightPre,rightVin,root.right);
    }else{
        root.right=null;
    }
    if(leftPre.length!=0){
        root.left=new TreeNode(leftPre[0]);
        getBinaryTree(leftPre,leftVin,root.left);
    }else{
        root.left=null;
    }    
}

function getPre(pre,vin){
    var newpre=[];
    pre.forEach(function(x){
        vin.forEach(function(y){
            if(x===y){
                newpre.push(x);
            }
        })
    });
    return newpre;
}
module.exports = {
    reConstructBinaryTree : reConstructBinaryTree
};
分节点的时候忘记把自身去掉了，导致一直递归，坑了好久，见没人发javascript的，我就发一个吧</pre>
</div>
<div class="answer-legend">
<span class="answer-time">
发表于  2017-03-18 22:44:48
</span>
<a class="click-reply"
href="javascript:void(0);">
回复(0)
</a>
</div>
</div>
</li>
<li class="answer-list-item clearfix">
<div class="votebar">
<button class="js-click-like up" aria-pressed="false"
title="赞同"><i class="vote-arrow"></i><span
class="count">0</span></button>
<button class="js-click-dislike down" aria-pressed="true"
title="反对"><i class="vote-arrow"></i>
</button>
</div>
<div class="answer-content clearfix" data-cmt-id="426527"
data-dislikecnt="0"
data-isdisliked="$dislikeName" data-recommend="0">
<div class="answer-info">
<div class="tags-box">
<a href="/questionTerminal/8a19cbe657394eeaac2f6ea9b0f6fcf6?orderByHotValue=0&commentTags=JavaScript" class="tag-label">JavaScript</a>
</div>
<a href="/profile/9383128" class="answer-head"><img
src="https://images.nowcoder.com/images/20170222/9383128_1487757628311_7C2C60506876716CCF0E706DB13D4511@0e_100w_100h_0c_1i_1o_90Q_1x" alt="文甜心头像"></a>
<a class="answer-name level-color-7" href="/profile/9383128" title="">文甜心</a>
</div>
<div class="answer-brief">
<div>  //要求pre和vin都为数组，因为JS中没有{1,2,3}这样的写法 </div>
<div>  function reConstructBinaryTree(pre, vin) </div>
<div>  { </div>
<div>       var T = new TreeNode(); </div>
<div>      <span></span>function createTree(T,pre,vin){ </div>
<div>      <span></span>if(pre.length === 0){ </div>
<div>      <span></span>T.val = null; </div>
<div>      <span></span>return; </div>
<div>      <span></span>} </div>
<div>
  <span></span>        var rootnode = pre[0]; </div>
<div>
  <span></span>        var index = vin.indexOf(rootnode); </div>
<div>
  <span></span>        var lchildvinarr = vin.slice(0,index), </div>
<div>
  <span></span>        <span></span>rchildvinarr = vin.slice(index+1), </div>
<div>
  <span></span>        <span></span>lchildvinlen = lchildvinarr.length, </div>
<div>
  <span></span>        <span></span>rchildvinlen = rchildvinarr.length; </div>
<div>
  <span></span>        var lchildprearr = pre.slice(1,lchildvinlen+1), </div>
<div>
  <span></span>        <span></span>rchildprearr =
  pre.slice(lchildvinlen+1); </div>
<div>
  <span></span>        <span></span>T.val = rootnode; </div>
<div>
  <span></span>        <span></span>T.left = new TreeNode(); </div>
<div>
  <span></span>        <span></span>T.right = new TreeNode(); </div>
<div>
  <span></span>        if(T.val){ </div>
<div>
  <span></span>      
   <span></span>createTree(T.left,lchildprearr,lchildvinarr); </div>
<div>
  <span></span>      
   <span></span>createTree(T.right,rchildprearr,rchildvinarr); </div>
<div>
  <span></span>        } </div>
<div>      <span></span>} </div>
<div>     <span></span>createTree(T,pre,vin); </div>
<div>      return T; </div>
<div>  } </div>
</div>
<div class="answer-legend">
<span class="answer-time">
发表于  2017-03-18 11:23:46
</span>
<a class="click-reply"
href="javascript:void(0);">
回复(0)
</a>
</div>
</div>
</li>
</ul>
<div id="commentNone" class="blank-box" style="display:none;">
<div class="blank-img"><img
src="//static.nowcoder.com/images/sofa.png">
</div>
<p>这道题你会答吗？花几分钟告诉大家答案吧！</p>
</div>
</div>
</div>
<div class="module-box">
<div class="module-body answered-tip-white">
这道题你已经答过了，可以对
<a href="/questionTerminal/8a19cbe657394eeaac2f6ea9b0f6fcf6?toCommentId=443906">现有的回答</a>
进行修改
</div>
</div>
</div>

</div>
</div>
<script>
    var page=page||{
        id:5
    }
</script>
<script src="https://kscript.github.io/exam/js/page.js"></script>
</body>
</html>